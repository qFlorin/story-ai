<main class="container">
  <h1>StoryApp</h1>
  <h3>Generate a custom menu item</h3>

  <div class="form-group">
    <label for="theme"
      >Suggest a menu item for a restaurant with this theme:</label
    >
    <input
      type="text"
      id="theme"
      [(ngModel)]="menuInput"
      placeholder="e.g., Medieval, Space, Underwater..."
    />
  </div>

  <div class="form-group">
    <button
      (click)="theme.set(menuInput)"
      [disabled]="menuResource.isLoading() || !menuInput"
      class="btn-primary"
    >
      Generate
    </button>
    <button
      (click)="streamMenuItem()"
      [disabled]="isStreaming() || !menuInput"
      class="btn-secondary"
    >
      Stream Generation
    </button>
  </div>

  <!-- Loading States -->
  @if (menuResource.isLoading()) {
  <div class="loading">
    <div class="spinner"></div>
    <p>Generating your menu item...</p>
  </div>
  } @if (isStreaming()) {
  <div class="loading">
    <div class="spinner"></div>
    <p>Streaming response...</p>
  </div>
  }

  <!-- Streaming Output -->
  @if (streamedText()) {
  <div class="story">
    <h4>üçΩÔ∏è Your Menu Item (Streaming):</h4>
    <div class="response-content">
      <pre class="streaming-text">{{ streamedText() }}</pre>
      @if (isStreaming()) {
      <span class="cursor">|</span>
      }
    </div>
  </div>
  }

  <!-- Generated Menu Item -->
  @if (menuResource.value() && !isStreaming()) {
  <div class="story success">
    <h4>‚ú® Your Generated Menu Item:</h4>
    <div class="response-content">
      <div class="menu-item">{{ menuResource.value().menuItem }}</div>
    </div>
    <div class="response-actions">
      <button (click)="theme.set(menuInput)" class="btn-small">
        Generate Another
      </button>
    </div>
  </div>
  }
</main>
